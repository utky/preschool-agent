## 4. サーバーサイド設計

サーバーサイドのロジックは、Next.jsのApp Routerの機能を用いて実装します。

- **API Routes**:
  - `app/api/` ディレクトリ以下に配置されます。
  - 各APIエンドポイントは `route.ts` (または `.js`) ファイルとして実装され、HTTPリクエストを処理します。
- **サーバーコンポーネント**:
  - デフォルトでサーバーサイドでレンダリングされるReactコンポーネントです。データベースアクセスや外部API呼び出しなどのサーバーサイドロジックをコンポーネント内に直接記述できます。
- **ビジネスロジック・外部連携**:
  - `voltagent/` や `lib/` といったディレクトリに、特定のフレームワークに依存しない純粋なビジネスロジックや、Google Cloud SDKなどの外部サービスと連携するクライアントコードを配置します。
- **Cloud Functions**:
  - 定期実行や非同期処理など、Next.jsのアプリケーションサーバーとは別のライフサイクルで実行する必要がある処理は、Cloud Functionsとして実装し、`functions/` ディレクトリ（別途作成）で管理します。
