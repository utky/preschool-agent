version: 2

models:
  - name: int_extracted_texts__chunked
    description: "Markdown構造を意識した階層チャンク分割（見出し→段落→句点の3段階分割、テーブル保護付き）"
    columns:
      - name: document_id
        description: "Google DriveファイルID（GCSメタデータから取得）"
        data_tests:
          - not_null
      - name: chunk_id
        description: "チャンクID（URI+chunk_indexのMD5ハッシュ）"
        data_tests:
          - not_null
          - unique
      - name: chunk_index
        description: "チャンクの順序インデックス"
        data_tests:
          - not_null
      - name: chunk_text
        description: "チャンクテキスト"
        data_tests:
          - not_null

  - name: int_document_chunks__embedded
    description: "チャンクにVertex AI text-embedding-005でベクトル埋め込みを生成した中間モデル"
    columns:
      - name: chunk_id
        description: "チャンクID"
        data_tests:
          - not_null
          - unique
      - name: document_id
        description: "文書ID"
        data_tests:
          - not_null
      - name: chunk_index
        description: "チャンクの順序インデックス"
        data_tests:
          - not_null
      - name: chunk_text
        description: "チャンクテキスト"
        data_tests:
          - not_null
      - name: chunk_embedding
        description: "768次元のベクトル埋め込み（FLOAT64配列）"
        data_tests:
          - not_null
